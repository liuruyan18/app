import{_ as B,H as y}from"./hls-CS45FAGB.js";import{u as N,a as P,b as H}from"./favorites-CzErikZZ.js";import{d as T,h as g,p as R,k as q,i as z,c as h,a as e,b as S,w as t,r as f,u as n,F as W,m as Y,n as j,f as d,t as c,o as k,_ as G}from"./index-CXCzEs_M.js";import"./swiper-BcqIYeZH.js";import"./Security-J1jS0fmJ.js";const J={class:"video-content"},K=["poster","data-src","data-type","src"],O=["onClick"],Q=T({__name:"videodetails",setup(U){const w=R(),E=N(),l=P(),C=H();g(""),l.item.length==0&&w.push({name:"favorites"});const $=a=>{const s=Math.floor(a/3600),_=a%3600,i=Math.floor(_/60),o=_%60;return`${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},m=a=>a>1e4?(a/1e4).toFixed(1)+"w":a,x=a=>{const s=new Date(a),_=s.getFullYear(),i=s.getMonth()+1,o=s.getDate();return`${_}-${i}-${o}`},p=g(),L=a=>{l.setfavoritesItem(a),w.push({name:"favoritesvideodetails"}),p.value.addEventListener("scroll",()=>{}),p.value.scrollTop=0,b()},b=()=>{const a=document.querySelector(".videoplayer");if(a)if(y.isSupported()&&a.dataset.type==="m3u8"){const s=new y;s.loadSource(a.dataset.src),s.attachMedia(a),s.on(y.Events.MANIFEST_PARSED,()=>{a.play()})}else a.src===""&&(a.src=a.dataset.src),a.play()};let F=g(null);return q(()=>{F.value=document.documentElement.clientHeight}),z(()=>{C.getfavoritesData(l.item),b()}),(a,s)=>{const _=f("ArrowLeftBold"),i=f("el-icon"),o=f("el-col"),v=f("Star"),r=f("el-row"),V=f("el-affix"),I=f("VideoPlay"),M=f("Film"),D=f("Clock"),A=f("el-image");return k(),h("div",{class:"video-details",ref_key:"videoContent",ref:p,style:j({height:n(F)-50+"px"})},[e(V,null,{default:t(()=>[e(r,{class:"video-header-row"},{default:t(()=>[e(o,{span:12,class:"video-back"},{default:t(()=>[e(i,{class:"video-back-icon",onClick:s[0]||(s[0]=u=>a.$router.back())},{default:t(()=>[e(_)]),_:1})]),_:1}),e(o,{span:12,class:"video-star"},{default:t(()=>[e(i,{class:"video-back-icon",onClick:s[1]||(s[1]=u=>n(E).addfavorites(n(l).item))},{default:t(()=>[e(v)]),_:1})]),_:1})]),_:1})]),_:1}),S("div",J,[S("video",{class:"videoplayer",ref:"videoplayer",width:"100%",preload:"auto",disablePictureInPicture:"true",controlslist:"nodownload noplaybackrate",poster:n(l).item.cover||"","data-src":n(l).item.video_url||"","data-type":n(l).item.video_url&&n(l).item.video_url.endsWith(".ts")?"m3u8":"mp4",src:n(l).item.video_url||"",muted:"",autoplay:"",loop:"",controls:""},null,8,K),e(r,null,{default:t(()=>[e(o,{span:24,class:"video-username"},{default:t(()=>[d(" @"+c(n(l).item.author),1)]),_:1})]),_:1}),e(r,null,{default:t(()=>[e(o,{span:24,class:"video-title"},{default:t(()=>[d(c(n(l).item.caption),1)]),_:1})]),_:1}),e(r,{class:"video-item-row"},{default:t(()=>[e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(I)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(c(m(n(l).item.play_count)),1)]),_:1}),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(v)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(c(m(n(l).item.collect_count)),1)]),_:1}),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(M)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:4},{default:t(()=>[d(c($(n(l).item.duration)),1)]),_:1}),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(D)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:5},{default:t(()=>[d(c(x(n(l).item.create_time)),1)]),_:1})]),_:1}),e(r,{class:"video-ad"},{default:t(()=>[e(o,{span:24},{default:t(()=>[e(B)]),_:1})]),_:1}),e(r,{class:"video-recommend-title"},{default:t(()=>[e(o,{span:24},{default:t(()=>s[2]||(s[2]=[S("span",null,"More Video Recommend",-1)])),_:1})]),_:1}),(k(!0),h(W,null,Y(n(C).datas,u=>(k(),h("div",{class:"video-item",key:u.id,onClick:X=>L(u)},[e(r,null,{default:t(()=>[e(o,{span:24},{default:t(()=>[e(A,{src:u.cover,style:{width:"100%"}},null,8,["src"])]),_:2},1024)]),_:2},1024),e(r,null,{default:t(()=>[e(o,{span:24},{default:t(()=>[d(c(u.caption),1)]),_:2},1024)]),_:2},1024),e(r,null,{default:t(()=>[e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(I)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(c(m(u.play_count)),1)]),_:2},1024),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(v)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(c(m(u.collect_count)),1)]),_:2},1024),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(M)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:4},{default:t(()=>[d(c($(u.duration)),1)]),_:2},1024),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(D)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:5},{default:t(()=>[d(c(x(u.create_time)),1)]),_:2},1024)]),_:2},1024)],8,O))),128)),e(r,null,{default:t(()=>[e(o,{class:"video-footer",span:24},{default:t(()=>s[3]||(s[3]=[d("已经到底了")])),_:1})]),_:1})])],4)}}}),se=G(Q,[["__scopeId","data-v-c2242997"]]);export{se as default};
