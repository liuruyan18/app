import{d as E,r as i,c as p,o as _,a as t,w as a,b as l,e as b,f as F,t as x,_ as H,g as S,v as k,h as $,i as z,j as R,k as W,l as N,n as M,u as g,m as j,F as G,E as q}from"./index-D0VcYLgy.js";import{S as J,a as A}from"./swiper-Bvt7pfDs.js";import{u as K}from"./douyin-CaIbGkUm.js";import{u as O}from"./favorites-_z_31Ozq.js";import{H as w}from"./hls-DL814E_v.js";import"./Security-CC4RzzBi.js";import"./index-B_78wbIu.js";const Q={class:"video-content"},U={class:"author"},X={key:0},Y=E({__name:"content",props:["author","caption","create_time"],setup(n){return(u,c)=>{const o=i("el-col"),d=i("el-row");return _(),p("div",Q,[t(d,null,{default:a(()=>[t(o,{class:"user"},{default:a(()=>[l("span",U,[n.author?(_(),p("span",X,"@")):b("",!0),F(" "+x(n.author),1)])]),_:1})]),_:1}),t(d,null,{default:a(()=>[t(o,{class:"caption"},{default:a(()=>[F(x(n.caption),1)]),_:1})]),_:1})])}}}),Z=H(Y,[["__scopeId","data-v-0f003773"]]),ee={class:"video-items"},te={class:"item"},oe={class:"item"},ae={class:"item"},ne=E({__name:"icon",props:["playcount","addfavorites","sharevideourl","item","changemuted","muted","playicon","clearscreen"],setup(n){const u=c=>c>1e4?(c/1e4).toFixed(1)+"w":c;return(c,o)=>{const d=i("VideoPlay"),f=i("el-icon"),r=i("el-col"),y=i("el-row"),I=i("Star"),h=i("Share"),D=i("WarningFilled"),P=i("Hide"),C=i("View");return _(),p("div",ee,[S(l("div",null,[t(y,null,{default:a(()=>[t(r,{onClick:o[0]||(o[0]=V=>n.playcount(n.item))},{default:a(()=>[t(f,null,{default:a(()=>[t(d)]),_:1}),l("div",te,x(u(n.item.play_count)),1)]),_:1})]),_:1}),t(y,null,{default:a(()=>[t(r,{onClick:o[1]||(o[1]=V=>n.addfavorites(n.item))},{default:a(()=>[t(f,null,{default:a(()=>[t(I)]),_:1}),l("div",oe,x(u(n.item.collect_count)),1)]),_:1})]),_:1}),t(y,null,{default:a(()=>[t(r,{onClick:o[2]||(o[2]=V=>n.sharevideourl(n.item))},{default:a(()=>[t(f,null,{default:a(()=>[t(h)]),_:1}),l("div",ae,x(u(n.item.share_count)),1)]),_:1})]),_:1})],512),[[k,n.playicon]]),t(y,null,{default:a(()=>[S(t(r,{onClick:n.changemuted},{default:a(()=>[t(f,null,{default:a(()=>[t(D)]),_:1}),o[3]||(o[3]=l("div",{class:"item"},[l("div",null,"静音")],-1))]),_:1},8,["onClick"]),[[k,n.muted]]),S(t(r,{onClick:n.clearscreen},{default:a(()=>[S(l("div",null,[t(f,null,{default:a(()=>[t(P)]),_:1}),o[4]||(o[4]=l("div",{class:"item"},[l("div",null,"清屏")],-1))],512),[[k,n.playicon]]),S(l("div",null,[t(f,null,{default:a(()=>[t(C)]),_:1}),o[5]||(o[5]=l("div",{class:"item"},[l("div",null,"显示")],-1))],512),[[k,!n.playicon]])]),_:1},8,["onClick"]),[[k,!n.muted]])]),_:1})])}}}),le=H(ne,[["__scopeId","data-v-a6ae3a7a"]]),se={key:0,class:"gesture-animation"},ie=["height","poster","data-src","data-type"],ce={key:0,class:"video-play"},ue=E({__name:"item",setup(n){const u=$(!0),c=$(!0),o=$(!1),d=K(),f=O(),r=$(!0);d.getDouyinData();const y=()=>{u.value=!1,h(!0),q({message:"静音已取消",type:"success",duration:1500})},I=()=>{c.value=!c.value},h=s=>{const e=document.querySelector(".swiper-slide-active video");if(e)if(e.muted=u.value,s){if(w.isSupported()&&e.dataset.type==="m3u8")if(e.paused)e.play();else{const v=new w;v.loadSource(e.dataset.src),v.attachMedia(e),v.on(w.Events.MANIFEST_PARSED,()=>{e.play()})}else e.src===""&&(e.src=e.dataset.src),e.play();o.value=!1}else e.pause()},D=()=>{setTimeout(()=>{h(!0)},500)},P=s=>{s.activeIndex===0?r.value=!0:r.value=!1,setTimeout(()=>{const e=document.querySelector(".swiper-slide-active video");if(e){if(e.muted=u.value,w.isSupported()&&e.dataset.type==="m3u8"){const v=new w;v.loadSource(e.dataset.src),v.attachMedia(e),v.on(w.Events.MANIFEST_PARSED,()=>{e.play()})}else e.src===""&&(e.src=e.dataset.src),e.play();o.value=!1}},50),setTimeout(()=>{const e=document.querySelector(".swiper-slide-prev video");e&&e.pause()},60),setTimeout(()=>{const e=document.querySelector(".swiper-slide-next video");e&&e.pause()},60),d.datas.length-s.activeIndex<4&&d.getDouyinData()},C=()=>{const s=document.querySelector(".swiper-slide-active video");s&&(s.paused?(s.play(),o.value=!1):(s.pause(),o.value=!0))},V=s=>{s.collectLoading||(s.collectLoading=!0,setTimeout(()=>{s.collectLoading=!1},300),s.play_count+=1,q({message:"爱看 + 1",grouping:!0,type:"success",duration:800}))};z(()=>{h(!0),o.value=!1}),R(()=>{h(!1),o.value=!0});const T=$((window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-50);return W(()=>{window.addEventListener("resize",()=>{T.value=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-50})}),(s,e)=>{const v=i("VideoPlay"),L=i("el-icon");return _(),N(g(J),{style:M({height:T.value+"px"}),"slides-per-view":1,direction:"vertical",onSwiper:D,onSlideChange:P},{default:a(()=>[t(g(A),null,{default:a(()=>[r.value?(_(),p("div",se,e[2]||(e[2]=[l("div",null,null,-1),l("span",null,"上滑更精彩",-1)]))):b("",!0)]),_:1}),(_(!0),p(G,null,j(g(d).datas,m=>(_(),N(g(A),{key:m.id,style:M({backgroundImage:`url(${m.gaussian_cover})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"})},{default:a(()=>[l("video",{width:"100%",height:T.value,preload:"auto",poster:m.cover,"data-src":m.video_url,"data-type":m.video_url.endsWith(".js")?"m3u8":"mp4",muted:"",autoplay:"",loop:"",onClick:e[0]||(e[0]=B=>C())},null,8,ie),S(t(Z,{author:m.author,caption:m.caption,create_time:m.create_time},null,8,["author","caption","create_time"]),[[k,c.value]]),t(le,{playcount:V,addfavorites:g(f).addfavorites,sharevideourl:g(d).sharevideourl,item:m,changemuted:y,muted:u.value,clearscreen:I,playicon:c.value},null,8,["addfavorites","sharevideourl","item","muted","playicon"]),o.value?(_(),p("div",ce,[t(L,null,{default:a(()=>[t(v,{onClick:e[1]||(e[1]=B=>C())})]),_:1})])):b("",!0)]),_:2},1032,["style"]))),128))]),_:1},8,["style"])}}}),de=H(ue,[["__scopeId","data-v-dc072cc2"]]),re={class:"video-box"},ve=E({__name:"douyin",setup(n){return(u,c)=>(_(),p("div",re,[t(de)]))}}),we=H(ve,[["__scopeId","data-v-8cca61f0"]]);export{we as default};
