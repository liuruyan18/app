import{_ as F}from"./Ad.vue_vue_type_script_setup_true_lang-C9TONwsK.js";import{s as H,h as x,p as $,C as B,E as y,d as R,k as T,c as w,a as e,b as k,w as t,r as i,u as r,e as U,f as d,t as u,o as C,_ as I}from"./index-D0VcYLgy.js";import{u as J,a as L}from"./Security-CC4RzzBi.js";import"./swiper-Bvt7pfDs.js";const V=J(),O=H("sharevideo",()=>{const h=x({}),_=$(),a=B();function S(){const v=a.params.share_id;if(v==null){_.replace({name:"/"});return}L({method:"post",url:"/api/share.php",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{data:V.encrypt(new URLSearchParams({share_id:v}).toString())}}).then(p=>{let c=JSON.parse(V.decrypt(p.data));c.code==1&&(h.value=c.data),c.code==2&&y.error(c.msg),c.code==3&&(y.error(c.msg),_.replace({name:"/"}))}).catch(p=>{y.error("网络错误")})}return{item:h,ShareVideoData:S}}),Y={class:"video-details",ref:"videoContent"},j={class:"video-content"},q=["src","poster"],z={key:0},A=R({__name:"sharevideo",setup(h){const _=$(),a=O();let S=x(null);T(()=>{S.value=document.documentElement.clientHeight,a.ShareVideoData()});const v=l=>{const s=Math.floor(l/1e3),m=Math.floor(s/3600),n=s%3600,o=Math.floor(n/60),g=n%60;return`${m.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`},p=l=>l>1e4?(l/1e4).toFixed(1)+"w":l,c=l=>{const s=new Date(l),m=s.getFullYear(),n=s.getMonth()+1,o=s.getDate();return`${m}-${n}-${o}`};return(l,s)=>{const m=i("House"),n=i("el-icon"),o=i("el-col"),g=i("User"),f=i("el-row"),D=i("el-affix"),M=i("VideoPlay"),N=i("Star"),b=i("Film"),P=i("Clock");return C(),w("div",Y,[e(D,null,{default:t(()=>[e(f,{class:"video-header-row"},{default:t(()=>[e(o,{span:12,class:"video-back"},{default:t(()=>[e(n,{class:"video-back-icon",onClick:s[0]||(s[0]=E=>r(_).replace({path:"/"}))},{default:t(()=>[e(m)]),_:1})]),_:1}),e(o,{span:12,class:"video-star"},{default:t(()=>[e(n,{class:"video-back-icon",onClick:s[1]||(s[1]=E=>r(_).replace({path:"/user"}))},{default:t(()=>[e(g)]),_:1})]),_:1})]),_:1})]),_:1}),k("div",j,[k("video",{ref:"VideoDetails",class:"videoplayer",disablePictureInPicture:"true",controlslist:"nodownload noplaybackrate",width:"100%",src:r(a).item.video_url,poster:r(a).item.cover,loop:"",preload:"auto",autoplay:"",controls:"",muted:""},null,8,q),e(f,null,{default:t(()=>[e(o,{span:24,class:"video-username"},{default:t(()=>[r(a).item.author!=""?(C(),w("span",z,"@")):U("",!0),d(" "+u(r(a).item.author),1)]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(o,{span:24,class:"video-title"},{default:t(()=>[d(u(r(a).item.caption),1)]),_:1})]),_:1}),e(f,{class:"video-item-row"},{default:t(()=>[e(o,{class:"video-item-info",span:1},{default:t(()=>[e(n,null,{default:t(()=>[e(M)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(u(p(r(a).item.play_count)),1)]),_:1}),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(n,null,{default:t(()=>[e(N)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(u(p(r(a).item.collect_count)),1)]),_:1}),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(n,null,{default:t(()=>[e(b)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:4},{default:t(()=>[d(u(v(r(a).item.duration)),1)]),_:1}),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(n,null,{default:t(()=>[e(P)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:5},{default:t(()=>[d(u(c(r(a).item.create_time)),1)]),_:1})]),_:1}),e(f,{class:"video-ad"},{default:t(()=>[e(o,{span:24},{default:t(()=>[e(F)]),_:1})]),_:1})])],512)}}}),X=I(A,[["__scopeId","data-v-9af60402"]]);export{X as default};
