import{_ as N,H as h}from"./hls-CS45FAGB.js";import{a as A,b as P}from"./bilibili-DFke89aa.js";import{u as H}from"./favorites-CzErikZZ.js";import{d as T,h as g,p as R,k as q,i as z,c as v,a as e,b as k,w as t,r as f,u as n,F as W,m as Y,n as j,e as G,f as d,t as c,o as y,_ as J}from"./index-CXCzEs_M.js";import"./swiper-BcqIYeZH.js";import"./Security-J1jS0fmJ.js";const K={class:"video-content"},O=["poster","data-src","data-type","src"],Q={key:0},U=["onClick"],X=T({__name:"videodetails",setup(Z){const S=R(),l=A(),B=H(),w=P();g(""),l.item.length==0&&S.push({name:"bilibili"});const C=a=>{const s=Math.floor(a/1e3),_=Math.floor(s/3600),i=s%3600,o=Math.floor(i/60),m=i%60;return`${_.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`},p=a=>a>1e4?(a/1e4).toFixed(1)+"w":a,$=a=>{const s=new Date(a),_=s.getFullYear(),i=s.getMonth()+1,o=s.getDate();return`${_}-${i}-${o}`},b=g(),D=a=>{l.setblibliItem(a),S.push({name:"videodetails"}),b.value.addEventListener("scroll",()=>{}),b.value.scrollTop=0,x()},x=()=>{const a=document.querySelector(".videoplayer");if(a)if(h.isSupported()&&a.dataset.type==="m3u8"){const s=new h;s.loadSource(a.dataset.src),s.attachMedia(a),s.on(h.Events.MANIFEST_PARSED,()=>{a.play()})}else a.src===""&&(a.src=a.dataset.src),a.play()};let M=g(null);return q(()=>{M.value=document.documentElement.clientHeight}),z(()=>{x(),w.getBilibiliData(l.item)}),(a,s)=>{const _=f("ArrowLeftBold"),i=f("el-icon"),o=f("el-col"),m=f("Star"),r=f("el-row"),E=f("el-affix"),F=f("VideoPlay"),I=f("Film"),V=f("Clock"),L=f("el-image");return y(),v("div",{class:"video-details",ref_key:"videoContent",ref:b,style:j({height:n(M)-50+"px"})},[e(E,null,{default:t(()=>[e(r,{class:"video-header-row"},{default:t(()=>[e(o,{span:12,class:"video-back"},{default:t(()=>[e(i,{class:"video-back-icon",onClick:s[0]||(s[0]=u=>a.$router.back())},{default:t(()=>[e(_)]),_:1})]),_:1}),e(o,{span:12,class:"video-star"},{default:t(()=>[e(i,{class:"video-back-icon",onClick:s[1]||(s[1]=u=>n(B).addfavorites(n(l).item))},{default:t(()=>[e(m)]),_:1})]),_:1})]),_:1})]),_:1}),k("div",K,[k("video",{class:"videoplayer",ref:"videoplayer",width:"100%",preload:"auto",disablePictureInPicture:"true",controlslist:"nodownload noplaybackrate",poster:n(l).item.cover||"","data-src":n(l).item.video_url||"","data-type":n(l).item.video_url&&n(l).item.video_url.endsWith(".ts")?"m3u8":"mp4",src:n(l).item.video_url||"",muted:"",autoplay:"",loop:"",controls:""},null,8,O),e(r,null,{default:t(()=>[e(o,{span:24,class:"video-username"},{default:t(()=>[n(l).item.author!=""?(y(),v("span",Q,"@")):G("",!0),d(" "+c(n(l).item.author),1)]),_:1})]),_:1}),e(r,null,{default:t(()=>[e(o,{span:24,class:"video-title"},{default:t(()=>[d(c(n(l).item.caption),1)]),_:1})]),_:1}),e(r,{class:"video-item-row"},{default:t(()=>[e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(F)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(c(p(n(l).item.play_count)),1)]),_:1}),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(m)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(c(p(n(l).item.collect_count)),1)]),_:1}),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(I)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:4},{default:t(()=>[d(c(C(n(l).item.duration)),1)]),_:1}),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(V)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:5},{default:t(()=>[d(c($(n(l).item.create_time)),1)]),_:1})]),_:1}),e(r,{class:"video-ad"},{default:t(()=>[e(o,{span:24},{default:t(()=>[e(N)]),_:1})]),_:1}),e(r,{class:"video-recommend-title"},{default:t(()=>[e(o,{span:24},{default:t(()=>s[2]||(s[2]=[k("span",null,"More Video Recommend",-1)])),_:1})]),_:1}),(y(!0),v(W,null,Y(n(w).datas,u=>(y(),v("div",{class:"video-item",key:u.id,onClick:ee=>D(u)},[e(r,null,{default:t(()=>[e(o,{span:24},{default:t(()=>[e(L,{src:u.cover,style:{width:"100%"}},null,8,["src"])]),_:2},1024)]),_:2},1024),e(r,null,{default:t(()=>[e(o,{span:24},{default:t(()=>[d(c(u.caption),1)]),_:2},1024)]),_:2},1024),e(r,null,{default:t(()=>[e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(F)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(c(p(u.play_count)),1)]),_:2},1024),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(m)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(c(p(u.collect_count)),1)]),_:2},1024),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(I)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:4},{default:t(()=>[d(c(C(u.duration)),1)]),_:2},1024),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(i,null,{default:t(()=>[e(V)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:5},{default:t(()=>[d(c($(u.create_time)),1)]),_:2},1024)]),_:2},1024)],8,U))),128)),e(r,null,{default:t(()=>[e(o,{class:"video-footer",span:24},{default:t(()=>s[3]||(s[3]=[d("已经到底了")])),_:1})]),_:1})])],4)}}}),ie=J(X,[["__scopeId","data-v-ae78419d"]]);export{ie as default};
