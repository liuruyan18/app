import{_ as B}from"./Ad.vue_vue_type_script_setup_true_lang-C9TONwsK.js";import{u as N,a as P,b as H}from"./favorites-_z_31Ozq.js";import{d as T,h as y,p as R,k as j,i as q,c as g,a as e,b as h,w as t,r as f,u as i,F as z,m as W,n as Y,f as d,t as c,o as S,_ as G}from"./index-D0VcYLgy.js";import{H as k}from"./hls-DL814E_v.js";import"./swiper-Bvt7pfDs.js";import"./Security-CC4RzzBi.js";const J={class:"video-content"},K=["poster","data-src","data-type"],O=["onClick"],Q=T({__name:"videodetails",setup(U){const w=R(),E=N(),n=P(),C=H();y(""),n.item.length==0&&w.push({name:"favorites"});const $=a=>{const s=Math.floor(a/3600),_=a%3600,l=Math.floor(_/60),o=_%60;return`${s.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},m=a=>a>1e4?(a/1e4).toFixed(1)+"w":a,b=a=>{const s=new Date(a),_=s.getFullYear(),l=s.getMonth()+1,o=s.getDate();return`${_}-${l}-${o}`},p=y(),L=a=>{n.setfavoritesItem(a),w.push({name:"favoritesvideodetails"}),p.value.addEventListener("scroll",()=>{}),p.value.scrollTop=0,x()},x=()=>{const a=document.querySelector(".videoplayer");if(a)if(k.isSupported()&&a.dataset.type==="m3u8"){const s=new k;s.loadSource(a.dataset.src),s.attachMedia(a),s.on(k.Events.MANIFEST_PARSED,()=>{a.play()})}else a.src===""&&(a.src=a.dataset.src),a.play()};let F=y(null);return j(()=>{F.value=document.documentElement.clientHeight}),q(()=>{C.getfavoritesData(n.item),x()}),(a,s)=>{const _=f("ArrowLeftBold"),l=f("el-icon"),o=f("el-col"),v=f("Star"),r=f("el-row"),V=f("el-affix"),I=f("VideoPlay"),M=f("Film"),D=f("Clock"),A=f("el-image");return S(),g("div",{class:"video-details",ref_key:"videoContent",ref:p,style:Y({height:i(F)-50+"px"})},[e(V,null,{default:t(()=>[e(r,{class:"video-header-row"},{default:t(()=>[e(o,{span:12,class:"video-back"},{default:t(()=>[e(l,{class:"video-back-icon",onClick:s[0]||(s[0]=u=>a.$router.back())},{default:t(()=>[e(_)]),_:1})]),_:1}),e(o,{span:12,class:"video-star"},{default:t(()=>[e(l,{class:"video-back-icon",onClick:s[1]||(s[1]=u=>i(E).addfavorites(i(n).item))},{default:t(()=>[e(v)]),_:1})]),_:1})]),_:1})]),_:1}),h("div",J,[h("video",{class:"videoplayer",ref:"videoplayer",width:"100%",preload:"auto",disablePictureInPicture:"true",controlslist:"nodownload noplaybackrate",poster:i(n).item.cover,"data-src":i(n).item.video_url,"data-type":i(n).item.video_url.endsWith(".js")?"m3u8":"mp4",muted:"",autoplay:"",loop:"",controls:""},null,8,K),e(r,null,{default:t(()=>[e(o,{span:24,class:"video-username"},{default:t(()=>[d(" @"+c(i(n).item.author),1)]),_:1})]),_:1}),e(r,null,{default:t(()=>[e(o,{span:24,class:"video-title"},{default:t(()=>[d(c(i(n).item.caption),1)]),_:1})]),_:1}),e(r,{class:"video-item-row"},{default:t(()=>[e(o,{class:"video-item-info",span:1},{default:t(()=>[e(l,null,{default:t(()=>[e(I)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(c(m(i(n).item.play_count)),1)]),_:1}),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(l,null,{default:t(()=>[e(v)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(c(m(i(n).item.collect_count)),1)]),_:1}),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(l,null,{default:t(()=>[e(M)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:4},{default:t(()=>[d(c($(i(n).item.duration)),1)]),_:1}),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(l,null,{default:t(()=>[e(D)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:5},{default:t(()=>[d(c(b(i(n).item.create_time)),1)]),_:1})]),_:1}),e(r,{class:"video-ad"},{default:t(()=>[e(o,{span:24},{default:t(()=>[e(B)]),_:1})]),_:1}),e(r,{class:"video-recommend-title"},{default:t(()=>[e(o,{span:24},{default:t(()=>s[2]||(s[2]=[h("span",null,"More Video Recommend",-1)])),_:1})]),_:1}),(S(!0),g(z,null,W(i(C).datas,u=>(S(),g("div",{class:"video-item",key:u.id,onClick:X=>L(u)},[e(r,null,{default:t(()=>[e(o,{span:24},{default:t(()=>[e(A,{src:u.cover,style:{width:"100%"}},null,8,["src"])]),_:2},1024)]),_:2},1024),e(r,null,{default:t(()=>[e(o,{span:24},{default:t(()=>[d(c(u.caption),1)]),_:2},1024)]),_:2},1024),e(r,null,{default:t(()=>[e(o,{class:"video-item-info",span:1},{default:t(()=>[e(l,null,{default:t(()=>[e(I)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(c(m(u.play_count)),1)]),_:2},1024),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(l,null,{default:t(()=>[e(v)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:3},{default:t(()=>[d(c(m(u.collect_count)),1)]),_:2},1024),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(l,null,{default:t(()=>[e(M)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:4},{default:t(()=>[d(c($(u.duration)),1)]),_:2},1024),e(o,{class:"video-item-info",span:1},{default:t(()=>[e(l,null,{default:t(()=>[e(D)]),_:1})]),_:1}),e(o,{class:"video-item-info",span:5},{default:t(()=>[d(c(b(u.create_time)),1)]),_:2},1024)]),_:2},1024)],8,O))),128)),e(r,null,{default:t(()=>[e(o,{class:"video-footer",span:24},{default:t(()=>s[3]||(s[3]=[d("已经到底了")])),_:1})]),_:1})])],4)}}}),le=G(Q,[["__scopeId","data-v-e92beb28"]]);export{le as default};
